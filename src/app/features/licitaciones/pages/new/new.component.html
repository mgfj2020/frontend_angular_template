<div class="card-main">
  <div class="card-header-custom">
    <h3>Crear Nueva Licitaci√≥n</h3>
  </div>

  <div class="form-group">
    <label for="nombre">Nombre de la Licitaci√≥n</label>
    <input 
      type="text" 
      id="nombre" 
      [(ngModel)]="nombre" 
      placeholder="Ej: Licitaci√≥n de Insumos 2026"
      class="form-input-custom"
      [disabled]="loading()">
  </div>

  <div 
    class="drop-zone" 
    [class.drag-over]="isDragOver()" 
    (dragover)="onDragOver($event)"
    (dragleave)="onDragLeave($event)"
    (drop)="onDrop($event)"
    (click)="fileInput.click()">
    
    <div class="icon">üìÅ</div>
    <p>Arrastra tus archivos aqu√≠ o haz clic para seleccionar</p>
    <input 
      #fileInput 
      type="file" 
      multiple 
      (change)="onFileSelected($event)" 
      style="display: none;">
  </div>

  <div class="file-list" *ngIf="selectedFiles().length > 0">
    <div 
      class="file-item" 
      *ngFor="let file of selectedFiles(); let i = index"
      [class.invalid]="getFileError(file.name)">
      
      <div class="file-info">
        <span class="file-name">{{ file.name }}</span>
        <span class="file-error" *ngIf="getFileError(file.name)">
          {{ getFileError(file.name) }}
        </span>
      </div>

      <button class="btn-remove" (click)="removeFile(i)" *ngIf="!loading()">‚úï</button>
    </div>
  </div>

  <div style="margin-top: 2rem;">
    <button 
      class="btn-custom btn-success" 
      (click)="onSubmit()" 
      [disabled]="loading() || !nombre() || selectedFiles().length === 0">
      {{ loading() ? 'Procesando...' : 'Crear Licitaci√≥n' }}
    </button>
  </div>

  <div *ngIf="error()" class="status-badge" style="margin-top: 1rem; border-color: #e74c3c; color: #e74c3c;">
    {{ error() }}
  </div>

  <div *ngIf="response()?.id" class="status-badge" style="margin-top: 1rem; border-color: #27ae60; color: #27ae60;">
    Licitaci√≥n creada con ID: {{ response()?.id }}
  </div>
</div>
